<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>Allsony試合結果報告ページ</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- https://loading.io/animation/ -->
<link rel="stylesheet" type="text/css" href="lib/loading.css?t=20181011">

<!-- https://jquery.com/ -->
<script src="lib/jquery-3.3.1.min.js"></script>

<!-- https://www.jsviews.com/ -->
<script src="lib/jsrender-0.9.91.min.js"></script>

<!-- https://github.com/exif-js/exif-js -->
<script src="lib/exif.js"></script>

<!-- https://github.com/rossturner/HTML5-ImageUploader -->
<script src="lib/ImageUploader.js?t=20181011"></script>

<!-- 自前で用意した css と js -->
<link rel="stylesheet" type="text/css" href="style.css?t=20181011">
<script src="script.js?t=20181011"></script>
<script src="tournament-info.js?t=20181011"></script>
</head>
<body>
<header>
  <h3>Allsony試合結果報告ページ</h3>
  <div style="line-height:0;"><img src="image/tennis.gif" width="311" height="60"></div>
  <div style="line-height:0;"><img src="image/line.gif" width="310" height="6"></div>
</header>
<br>
<div>
試合終了後、勝チームのキャプテンは結果を下記のフォームに入力してください。
</div>
<div>
  <table class="table table-bordered" width="320" onChange="onTableUpdate()">
    <tr class="text-center text-nowrap table-info"><th colspan=5>試合情報</th></tr>
    <tr class="text-center">
      <th class="text-left">
        <input onclick="onSexUpdate()" type="radio" name="sex" value="man" id="radio_man"><label for="radio_man">男子</label><br>
        <input onclick="onSexUpdate()" type="radio" name="sex" value="woman" id="radio_woman"><label for="radio_woman">女子</label><br>
        <input onclick="onSexUpdate()" type="radio" name="sex" value="senior" id="radio_senior"><label for="radio_senior">シニア</label>
      </th>
      <th colspan=4 class="text-left">
        <div>
        <select id="match_league">
          <option value="">-- 試合の選択 --</option>
        </select>
        </div>
        <div>
        <select id="match_number">
          <option value="">-- 試合Noの選択 --</option>
          <option value="1">①
          <option value="2">②
          <option value="3">③
          <option value="4">④
          <option value="5">⑤
          <option value="6">⑥
          <option value="7">⑦
          <option value="8">⑧
          <option value="9">⑨
          <option value="10">⑩
          <option value="11">⑪
          <option value="12">⑫
          <option value="13">⑬
          <option value="14">⑭
          <option value="15">⑮
        </select>
        </div>
      </th>
    </tr>
  </table>
  <table class="table table-bordered input-field hidden" width="320" onChange="onTableUpdate()">
    <tr class="text-center text-nowrap table-info"><th>自チーム名</th><th>vs</th><th>対戦チーム名</th></tr>
    <tr class="text-center">
      <td>
        <select id="team_L" class="team-selector"></select>
      </td>
      <td>
          vs
      </td>
      <td>
        <select id="team_R" class="team-selector"></select>
      </td>
    </tr>
    <tr class="text-center text-nowrap table-info"><th colspan=3>勝敗数</th></tr>
    <tr class="text-center">
      <td class="text-right">
          <select id="match_L">
              <option value="0">0<option value="1">1<option value="2">2<option value="3">3
              <option value="4">4<option value="5">5
          </select>
      </td>
      <td>
          vs
      </td>
      <td class="text-left">
          <select id="match_R">
              <option value="0">0<option value="1">1<option value="2">2<option value="3">3
              <option value="4">4<option value="5">5
          </select>
      </td>
    </tr>

    <tr class="text-center table-info"><th colspan=3>取得ゲーム数</th></tr>
    <tr id="game_S1">
      <td class="text-right">
        <select id="game_L_S1">
          <option value="0">0<option value="1">1<option value="2">2<option value="3">3
          <option value="4">4<option value="5">5<option value="6">6<option value="7">7
        </select>
      </td>
      <td class="text-center">S1</td>
      <td class="text-left">
        <select id="game_R_S1">
          <option value="0">0<option value="1">1<option value="2">2<option value="3">3
          <option value="4">4<option value="5">5<option value="6">6<option value="7">7
        </select>
      </td>
    </tr>
    <tr id="game_S2">
      <td class="text-right">
        <select id="game_L_S2">
          <option value="0">0<option value="1">1<option value="2">2<option value="3">3
          <option value="4">4<option value="5">5<option value="6">6<option value="7">7
        </select>
      </td>
      <td class="text-center">S2</td>
      <td class="text-left">
        <select id="game_R_S2">
          <option value="0">0<option value="1">1<option value="2">2<option value="3">3
          <option value="4">4<option value="5">5<option value="6">6<option value="7">7
        </select>
      </td>
    </tr>
    <tr id="game_D1">
      <td class="text-right">
        <select id="game_L_D1">
          <option value="0">0<option value="1">1<option value="2">2<option value="3">3
          <option value="4">4<option value="5">5<option value="6">6<option value="7">7
        </select>
      </td>
      <td class="text-center">D1</td>
      <td class="text-left">
        <select id="game_R_D1">
          <option value="0">0<option value="1">1<option value="2">2<option value="3">3
          <option value="4">4<option value="5">5<option value="6">6<option value="7">7
        </select>
      </td>
    </tr>
    <tr id="game_D2">
      <td class="text-right">
        <select id="game_L_D2">
          <option value="0">0<option value="1">1<option value="2">2<option value="3">3
          <option value="4">4<option value="5">5<option value="6">6<option value="7">7
        </select>
      </td>
      <td class="text-center">D2</td>
      <td class="text-left">
        <select id="game_R_D2">
          <option value="0">0<option value="1">1<option value="2">2<option value="3">3
          <option value="4">4<option value="5">5<option value="6">6<option value="7">7
        </select>
      </td>
    </tr>
    <tr id="game_D3">
      <td class="text-right">
        <select id="game_L_D3">
          <option value="0">0<option value="1">1<option value="2">2<option value="3">3
          <option value="4">4<option value="5">5<option value="6">6<option value="7">7
        </select>
      </td>
      <td class="text-center">D3</td>
      <td class="text-left">
        <select id="game_R_D3">
          <option value="0">0<option value="1">1<option value="2">2<option value="3">3
          <option value="4">4<option value="5">5<option value="6">6<option value="7">7
        </select>
      </td>
    </tr>
    <tr>
      <td class="text-right" id="game_L_total">0</td>
      <td class="text-center">合計</td>
      <td class="text-left" id="game_R_total">0</td>
    </tr>

    <tr class="table-info"><th colspan=3>オーダー用紙の画像添付</th></tr>
    <tr><td colspan=3>
      <input class="image-upload" data-id="1" id="uploadImage3" type="file" name="images[1]" accept="image/jpeg,image/jpg" data-product="1034"><br>
      <div class="hidden" id="upload-progress">
          <span class="ld ld-ring ld-cycle" style="font-size:24px;color:#8da"></span>
          Uploading, please wait...
      </div>
      <img class="hidden" width="320" height="0" id="image-preview">

    </td></tr>
    <tr class="table-info"><th colspan=3>送信者のお名前</th></tr>
    <tr><td colspan=3>
      <input type="text" name="sender_name" id="sender_name" placeholder="名前を入力してください">
    </td></tr>
    <tr class="table-info"><th colspan=3>スタッフへの連絡事項 (もしあれば)</th></tr>
    <tr><td colspan=3>
      <textarea name="comment" id="comment" rows="4" cols="30" placeholder="スタッフに伝えたいことがあれば、ここに入力してください"></textarea>
    </td></tr>
    <tr><td colspan=3 class="text-center">
      <button onClick="onSendReport()" id="send_button" disabled>結果を送信する</button>
      <div class="hidden" id="sending_status">
        <span class="ld ld-ring ld-cycle" style="font-size:24px;color:#8da"></span>
        送信中...
      </div>
      <div class="hidden" id="send_report_status" style="color: red;">
        送信完了しました。<br>
        ご協力ありがとうございます。
      </div>
    </td></tr>
  </table>

  <input type="hidden" name="mail_contents" id="mail_contents" value="">
  <input type="hidden" name="mail_subject" id="mail_subject" value="">
  <input type="hidden" name="match_name" id="match_name" value="">
  <input type="hidden" name="match_image" id="match_image" value="">

</div>
<hr>
送信済の結果を確認するページはこちらです<br>
<a href="view-report.php">試合結果確認ページ</a><br>

<!-- メールに表示される内容をレビューするためのフィールド -->
<div id="debug_view" class="hidden">
<hr>
<h3>下記はデバッグ用の表示です。本番は非表示になります。</h3>
<div id="mail_contents_view"></div>
</div>

<!-- メールのテンプレート -->
<script id="mail_contents_template" type="text/x-jsrender">
  <table class="table table-bordered table-mail">
    <tr class="text-center text-nowrap table-info"><th colspan=5>試合情報</th></tr>
    <tr class="text-center">
      <th colspan=5>
        {{:sex_label}} / {{:match_league}} / 試合No {{:match_number}}<br>
      </th>
    </tr>
    <tr class="text-center text-nowrap table-info"><th>自チーム名</th><th>vs</th><th>対戦チーム名</th></tr>
    <tr class="text-center">
      <td>{{:team_L}}</td>
      <td>vs</td>
      <td>{{:team_R}}</td>
    </tr>
    <tr class="text-center text-nowrap table-info"><th colspan=3>勝敗数</th></tr>
    <tr class="text-center">
      <td class="text-right">{{:match_L}}</td>
      <td>vs</td>
      <td class="text-left">{{:match_R}}</td>
    </tr>
  
    <tr class="text-center table-info"><th colspan=3>取得ゲーム数</th></tr>
    {{if sex_label == "男子" || sex_label == "女子"}}
    <tr>
      <td class="text-right">{{:game_L_S1}}</td>
      <td class="text-center">S1</td>
      <td class="text-left">{{:game_R_S1}}</td>
    </tr>
    {{/if}}
    {{if sex_label == "男子"}}
    <tr>
      <td class="text-right">{{:game_L_S2}}</td>
      <td class="text-center">S2</td>
      <td class="text-left">{{:game_R_S2}}</td>
    </tr>
    {{/if}}
    <tr>
      <td class="text-right">{{:game_L_D1}}</td>
      <td class="text-center">D1</td>
      <td class="text-left">{{:game_R_D1}}</td>
    </tr>
    <tr>
      <td class="text-right">{{:game_L_D2}}</td>
      <td class="text-center">D2</td>
      <td class="text-left">{{:game_R_D2}}</td>
    </tr>
    {{if sex_label == "男子" || sex_label == "シニア"}}
    <tr>
      <td class="text-right">{{:game_L_D3}}</td>
      <td class="text-center">D3</td>
      <td class="text-left">{{:game_R_D3}}</td>
    </tr>
    {{/if}}
    <tr>
      <td class="text-right">{{:game_L_total}}</td>
      <td class="text-center">合計</td>
      <td class="text-left">{{:game_R_total}}</td>
    </tr>

    <tr class="table-info"><th colspan=3>送信者のお名前</th></tr>
    <tr><td colspan=3>{{>sender_name}}</td></tr>
    <tr class="table-info"><th colspan=3>スタッフへの連絡事項 (もしあれば)</th></tr>
    <tr><td colspan=3><pre>{{>comment}}</pre></td></tr>
  </table>
<!--
  <div>UserAgent: {{:userAgent}}</div>
  <div>MailSubject: {{:mail_subject}}</div>
  <div>Keywords: {{:match_name}}<div>
-->
</script>

</body>
</html>
